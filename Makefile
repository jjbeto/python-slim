########################################################################################################################
######## Build containers ##############################################################################################
########################################################################################################################
.PHONY: build

build:
	@echo "ðŸ”¨ Building images"
	docker-compose build


########################################################################################################################
######## Start containers ##############################################################################################
########################################################################################################################
.PHONY: start

start: build
	docker-compose up -d --force-recreate --no-deps


########################################################################################################################
######## Stop and remove containers ####################################################################################
########################################################################################################################
.PHONY: stop

stop:
	docker-compose down -v


########################################################################################################################
######## Check logs ####################################################################################################
########################################################################################################################
.PHONY: logs logs-evaluate

logs:
	docker-compose logs --follow --tail=10

logs-evaluate:
	docker-compose logs --follow --tail=10 pycalc-evaluate


########################################################################################################################
######## Cleanup docker env ############################################################################################
########################################################################################################################
.PHONY: system-prune clean

system-prune:
	@echo "ðŸ›Ž System prune"
	echo "y" | docker system prune

clean: stop system-prune


########################################################################################################################
######## Help ##########################################################################################################
########################################################################################################################
.PHONY: help

help:
	@echo "    build"
	@echo "        Build Project in Docker Container"
	@echo "    start"
	@echo "        Build and Run Project in Docker Container"
	@echo "    stop"
	@echo "        Stop and Remove Docker Container"
	@echo "    logs"
	@echo "        Alias for check-logs-dev"
	@echo "    logs-evaluate"
	@echo "        Check logs of Docker Container jjbeto/pycalc-micro-evaluate"
	@echo "    clean"
	@echo "        Clean the Docker Container Env"
	@echo "    system-prune"
	@echo "        Clean Environment: Docker Containers, volumes, images which are dangling"
